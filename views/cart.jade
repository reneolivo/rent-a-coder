extend layout

block content
	h2 Cart

	form#cart(method="post")
		input(type="hidden", name="business", value=secrets.business)
		input(type="hidden", name="cmd", value="_cart")
		input(type="hidden", name="currency_code", value="USD")
		input(type="hidden", name="upload", value=1)
		
		table#coders(cellpadding=3, width="100%")
			thead
				tr
					th(colspan=2) Coder
					th Rent Type
					th Hours
					th Base Fee

			tbody
				each coder, i in coders
					tr.coder-info
						td.image
							img(width=50, src="/data/users/" + coder.imagePath, alt="Coder")

						td.name= coder.name

						td.rent-type
							select(name="os0_"+(i+1))
								option(value="email") By Email
								option(value="skype") By Skype
								option(value="on-site") On Site

						td.quantity
							input(type="hidden", name="item_id[]", value=coder._id)
							input(type="number", name="quantity[]", value="1", size=2, min=1)

						td.fee
							span.currency USD$
							span.number= coder.price


		hr

		if user
			if user.creditCards && user.creditCards && user.creditCards.length > 0
				h4 Use Credit Card:

				.credit-cards
				each card, i in user.creditCards
					.card
						label
							input(type="radio", name="card", value=card.authorizeId, checked= i == 0)

							span= card.cardNumber
							span  - 
							span= card.expirationDate

				hr

				input(type="submit", value="Checkout")
			else
				p
					| Please add at least one 
					a(href="/account") Credit Card
					|  to your account
		else
			p
				| Please 
				a(href="/account/login") Login
				|  to continue with the checkout process